// Package conf 提供了基础的配置加载功能
package conf

import (
	"goto-bangumi/internal/model"

	"github.com/spf13/viper"
)

// setDefaultValues sets default values from model.NewConfig()
// 使用 model 包提供的默认值，避免重复定义
func setDefaultValues() {
	// 从 model 包获取默认配置
	defaultConfig := model.NewConfig()

	// Program defaults
	viper.SetDefault("program.rss_time", defaultConfig.Program.RssTime)
	viper.SetDefault("program.webui_port", defaultConfig.Program.WebuiPort)
	viper.SetDefault("program.password", defaultConfig.Program.PassWord)
	viper.SetDefault("program.debug_enable", defaultConfig.Program.DebugEnable)

	// Downloader defaults
	viper.SetDefault("downloader.type", defaultConfig.Downloader.Type)
	viper.SetDefault("downloader.host", defaultConfig.Downloader.Host)
	viper.SetDefault("downloader.username", defaultConfig.Downloader.Username)
	viper.SetDefault("downloader.password", defaultConfig.Downloader.Password)
	viper.SetDefault("downloader.path", defaultConfig.Downloader.SavePath)
	viper.SetDefault("downloader.ssl", defaultConfig.Downloader.Ssl)

	// RSS Parser defaults
	viper.SetDefault("rss_parser.enable", defaultConfig.RssParse.Enable)
	viper.SetDefault("rss_parser.filter", defaultConfig.RssParse.Filter)
	viper.SetDefault("rss_parser.include", defaultConfig.RssParse.Include)
	viper.SetDefault("rss_parser.language", defaultConfig.RssParse.Language)
	viper.SetDefault("rss_parser.mikan_custom_url", defaultConfig.RssParse.MikanCustomURL)
	viper.SetDefault("rss_parser.tmdb_api_key", defaultConfig.RssParse.TmdbAPIKey)

	// Bangumi Manage defaults
	viper.SetDefault("bangumi_manage.enable", defaultConfig.BangumiManage.Enable)
	viper.SetDefault("bangumi_manage.eps_complete", defaultConfig.BangumiManage.EpsComplete)
	viper.SetDefault("bangumi_manage.rename_method", defaultConfig.BangumiManage.RenameMethod)
	viper.SetDefault("bangumi_manage.year", defaultConfig.BangumiManage.Year)
	viper.SetDefault("bangumi_manage.group", defaultConfig.BangumiManage.Group)

	// Proxy defaults
	viper.SetDefault("proxy.enable", defaultConfig.Proxy.Enable)
	viper.SetDefault("proxy.type", defaultConfig.Proxy.Type)
	viper.SetDefault("proxy.host", defaultConfig.Proxy.Host)
	viper.SetDefault("proxy.port", defaultConfig.Proxy.Port)
	viper.SetDefault("proxy.username", defaultConfig.Proxy.Username)
	viper.SetDefault("proxy.password", defaultConfig.Proxy.Password)

	// Notification defaults
	viper.SetDefault("notification.enable", defaultConfig.Notification.Enable)
	viper.SetDefault("notification.type", defaultConfig.Notification.Type)
	viper.SetDefault("notification.token", defaultConfig.Notification.Token)
	viper.SetDefault("notification.chat_id", defaultConfig.Notification.ChatID)

}
